# 2019-06-11 일기

## 로또, 웹, DB 피드백 정리
### '+' 하는 대신 String builder를 사용해보면 어떨까요?
- 문자열을 덧붙이는 작업은 String 클래스보다 StringBuilder 클래스의 성능이 더 우수하다. 왜냐하면, String은 문자열을 immutable로 저장하기 때문에 +연산을 할 때 새로운 인스턴스를 계속 생성해주어야한다. 인스턴스를 새로 생성하는 작업은 연속된 메모리 공간을 힙에서 찾아서 할당해주어야 하므로 일반적으로 느린 연산에 속한다. 반면에 StringBuiler 클래스는 가변 배열을 두고 append() 메서드를 통해 문자열을 늘려준다. 물론 배열의 크기보다 큰 문자열이 된다면 힙에 새로운 메모리 공간을 할당해야 하지만, String 클래스의 +보다 그 빈도수가 적다.(가변 배열은 크기를 2배로 늘려주는 방법을 사용한다. C++의 vector도 그렇고, 자바에서도 대부분 가변 배열은 2배로 늘려주는 방법을 선택한다. 이 방법이 효율적이라고 증명되어 있다.)
- Java에서 String 관련 클래스를 더 알아보면, StringBuffer 클래스도 있다. 이 클래스의 기능은 StringBuiler 클래스와 거의 동일하지만, 쓰레드 세이프하기 때문에 멀티 쓰레드 환경에서 사용하기 좋다. StringBuiler 클래스는 단일 쓰레드에서 StringBuffer 클래스보다 성능이 좋다고 한다.
- String 클래스도 장점을 가지고 있다. StringBuiler클래스와 StringBuffer 클래스를 String으로 읽으려면 toString() 메서드를 사용한다. 그러면 역시 힙에 메모리를 할당하여 String 클래스를 만들어야 한다. 그러므로 읽는 수행이 많을 때는 String 클래스를 사용하는 것이 효율적이다.

### 구입한 로또 리스트를 하나의 String으로 저장하는 대신 db 설계를 통해 도메인 기반으로 설계해보면 어떨까요?
- db설계?
- 데이터베이스 테이블 수정: round, lotto, winninglotto, lottoresult
- 디비에 대한 피드백은 하나로 모아서 하기


## 우코데 강의(by pobi)
### 프로젝트 3요소
- 비용, 일정, 품질
- 현실은 비용은 적고, 일정은 짧고, 품직은 높아야한다.

### 현장 프로젝트의 현실
- 일정이 품질보다 훨씬 중요하다.
- 생산성이 빠르면 나쁜 코드가 될 확률이 높고, 이는 시간이 지날수록 생산성이 매우 떨어진다.
- 반면에, 클린코드는 생산성을 일정하게 가져갈 수 있다.
- 일정은 맞춰야 한다. 품질을 낮추더라도!
- 처음부터 완벽한 설계를 진행할 수는 없다. 일단 돌아가는 것부터해서 점점 발전시킨다.
  - 빠르게 실패하는 것이 중요하다.

### 점진적인 리팩토링
- 기존의 리팩토링보다 난이도가 있다.
- 현장에서 필요한 기술이다.
- 하나의 프로덕션 코드가 리팩토링이 되면, 모든 테스트 코드에서 에러가 난다.
- 기존 코드에 컴파일 에러가 발생하지 않도록 리팩토링한다.
- 리팩토링 과정에서 테스트 코드가 깨지지 않도록 리팩토링하는 연습이 필요하다.
- 바꾸고 싶은 코드(메서드)를 복사, 붙여넣기를 한다.
- 점진적인 리팩토링을 하면 언제든지 정상적으로 돌아가는 프로그램에서 리팩토링을 할 수 있다.
  - 정상적으로 돌아가는 메서드 역시 존재하기 때문이다.
  - 리팩토링은 로직을 변경하는 것이 아니기 때문에 리팩토링중인 메서드와 기존 메서드가 공존해도 된다.
  - 심지어, 배포해도 상관없다. 로직이 변경되는 것이 아니기 때문에
